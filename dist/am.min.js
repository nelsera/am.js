// am.js@v0.0.0, MIT licensed. https://github.com/adriancmiranda/am.js
!function(t,n,e){"use strict";function r(t,n){var e,r={};n="object"===i(n)?n:{};for(e in t)r[e]=(n.hasOwnProperty(e)?n:t)[e];return r}function o(t,n,e,r,o,a,i){var u,m,s,c,l,p=[];for(u=0;t>u;u++)s=i?~~(u/n):u%n,m=i?u%n:~~(u/n),c=Math.round(e+o)*s,l=Math.round(r+a)*m,p.push({column:s,row:m,x:0-c,y:0-l,frame:u,label:""});return p}function a(t,n){if(t===!1)return"Boolean";if(""===t)return"String";if(0===t)return"Number";if(t&&t.constructor){var e=(t.constructor.toString()||Object.prototype.toString.apply(t)).replace(/^.*function([^\s]*|[^\(]*)\([^\x00]+$/,"$1").replace(/^(\[object\s)|]$/g,"").replace(/\s+/,"")||"Object";return n===!0||/^(Boolean|RegExp|Number|String|Array|Date)$/.test(e)?e:"Object"}return t}function i(n,e){var r=typeof n;return n===!1?"boolean":""===n?"string":(n&&"object"===r&&(r=a(n,e),r=String(r).toLowerCase()),"number"===r&&!t.isNaN(n)&&t.isFinite(n)?e===!0&&t.parseFloat(n)===t.parseInt(n,10)?0>n?"int":"uint":"number":n?r:n)}function u(n,e){return n=t.parseFloat(n),n=t.isNaN(n)||!t.isFinite(n)?0:n,e===!0&&(n=t.parseInt(1e4*n,10)/1e4),n}function m(t){return"string"===i(t)?/^(true|(^[1-9][0-9]*$)$|yes|y|sim|s|on)$/gi.test(t):!!t}function s(t,n,e){return t=u(t),n=u(n),e=u(e),t>e?e:n>t?n:t}function c(t,n,e){return t=u(t),n=u(n),e=u(e),t%=e,u(n>t?t+e:t)}function l(t){return t=p(t),0>t?0:t}function p(n){return 0|t.parseInt(n,10)}!function(){var n,e,r,o,a,i;for(e=0,r=["ms","moz","webkit","o"],n=0;n<r.length&&!t.requestAnimationFrame;++n)o=r[n]+"RequestAnimationFrame",a=r[n]+"CancelAnimationFrame",i=r[n]+"CancelRequestAnimationFrame",t.requestAnimationFrame=t[o],t.cancelAnimationFrame=t[a]||t[i];t.requestAnimationFrame||(t.requestAnimationFrame=function(n,r){var o,a,i;return o=(new Date).getTime(),a=Math.max(0,16-(o-e)),i=t.setTimeout(function(){n(o+a,r)},a),e=o+a,i}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(n){t.clearTimeout(n)})}(),e.Sprite=function(n,e){function a(n,e,r){var o,a;if("function"===i(n))return"number"===i(e)&&(r=e,e=null),a=++A.animationID,r=1e3/s(r||10,1,60),A.animations[a]={timeout:0,rAF:0},o=Array.prototype.slice.call(arguments,0),o.splice(0,3),function u(){A.animations[a].timeout=t.setTimeout(function(){A.animations[a].rAF=t.requestAnimationFrame(u,e),n.apply(null,o)},r)}(),a}function f(n){i(A.animations[n])&&(t.clearTimeout(A.animations[n].timeout),t.cancelAnimationFrame(A.animations[n].rAF),delete A.animations[n])}function F(t){y.lastFrame=y.currentFrame,y.currentFrame=c(t,1,y.totalFrames),y.row=y.timeline[y.currentFrame-1].row,y.column=y.timeline[y.currentFrame-1].column,y.offsetX=y.timeline[y.currentFrame-1].x,y.offsetY=y.timeline[y.currentFrame-1].y,y.element.style.backgroundPosition=y.offsetX+"px "+y.offsetY+"px"}function g(){"function"==typeof S.onUpdate&&S.onUpdate.apply(y,S.onUpdateParams),y.currentFrame<y.targetFrame?F(y.currentFrame+d):y.currentFrame>y.targetFrame?F(y.currentFrame+d):y.currentFrame===y.targetFrame&&(y.looping?y.yoyo?y.loopBetween(y.currentFrame,y.targetNextFrame,y.yoyo,S):y.loopBetween(y.targetNextFrame,y.currentFrame,y.yoyo,S):(y.pause(),"function"==typeof S.onComplete&&S.onComplete.apply(y,S.onCompleteParams)))}var y=this,A=y.constructor.static,d=1,v=null,S={};y.id=A.instances++,y.name="AM[Sprite_"+y.id+"]",y.element=n,y.options=r(A.defaults,e),y.fps=u(y.options.fps),y.totalFrames=Math.max(1,y.options.totalFrames-1),y.currentFrame=s(y.options.currentFrame,1,y.totalFrames),y.vertical=m(y.options.vertical),y.tileW=u(y.options.tileW)||n.clientWidth,y.tileH=u(y.options.tileH)||n.clientHeight,y.columns=l(y.options.columns),y.rows=l(y.options.rows),y.column=u(y.currentFrame%y.rows),y.row=~~(y.currentFrame/y.columns),y.timeline=o(y.totalFrames,y.vertical?y.rows:y.columns,y.tileW,y.tileH,0,0,y.vertical),y.lastFrame=y.currentFrame,y.targetNextFrame=0,y.targetFrame=0,y.offsetX=0,y.offsetY=0,y.reverse=!1,y.running=!1,y.looping=!1,y.yoyo=!1,y.play=function(t,n){y.pause(),"uint"===i(t,!0)?(S="object"===i(n)?n:{},y.targetFrame=s(t,1,y.totalFrames),y.reverse=y.currentFrame>y.targetFrame,d=y.reverse?-1:1,"function"==typeof S.onInit&&S.onInit.apply(y,S.onInitParams)):y.targetFrame=0,v=a(g,y.element,y.fps),y.running=!0,"function"==typeof S.onStart&&S.onStart.apply(y,S.onStartParams)},y.pause=function(){f(v),v=null},y.togglePause=function(){y[v?"pause":"play"]()},y.stop=function(){F(0),y.pause(),y.running=!1},y.playToBeginAndStop=function(){y.play(0)},y.playToEndAndStop=function(){y.play(y.totalFrames)},y.gotoRandomFrame=function(){y.gotoAndStop(~~(Math.random()*y.totalFrames))},y.gotoAndPlay=function(t){F(t),y.play(),y.running=!0},y.gotoAndStop=function(t){F(t),y.pause(),y.running=!1},y.nextFrame=function(){y.jumpFrames(1),y.running=!1},y.prevFrame=function(){y.jumpFrames(-1),y.running=!1},y.jumpFrames=function(t){y.gotoAndStop(y.currentFrame+p(t))},y.loopBetween=function(t,n,e,r){y.gotoAndStop(t),y.running=!0,y.looping=!0,y.yoyo=m(e),y.targetNextFrame=l(t),0===n&&(n=y.totalFrames),y.play(n,r)},y.cancelLooping=function(){y.running=!1,y.looping=!1,y.yoyo=!1}},e.Sprite.static={instances:0,animationID:0,animations:{},defaults:{fps:24,totalFrames:1,currentFrame:1,vertical:!1,tileW:0,tileH:0,columns:0,rows:0}}}(this,this.document,this.AM=this.AM||{});